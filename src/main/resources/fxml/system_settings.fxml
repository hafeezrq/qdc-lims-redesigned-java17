<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.qdc.lims.ui.controller.SystemSettingsController"
            prefHeight="600.0" prefWidth="800.0">

    <top>
        <VBox>
             <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
                <Label text="⚙️ System Configuration" textFill="WHITE">
                    <font>
                        <Font name="System Bold" size="18.0"/>
                    </font>
                </Label>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="Save Changes" onAction="#handleSave" style="-fx-background-color: #27ae60; -fx-text-fill: white; -fx-font-weight: bold;"/>
                <Button text="Close" onAction="#handleClose" style="-fx-background-color: #95a5a6; -fx-text-fill: white;"/>
            </HBox>
        </VBox>
    </top>

    <center>
        <TabPane tabClosingPolicy="UNAVAILABLE">
            
            <!-- Tab 1: General Info -->
            <Tab text="General Info">
                <ScrollPane fitToWidth="true">
                    <VBox spacing="20" style="-fx-padding: 30;">
                        <Label text="Clinic Information" style="-fx-font-size: 16; -fx-font-weight: bold; text-decoration: underline;"/>
                        
                        <GridPane hgap="15" vgap="15">
                            <Label text="Clinic Name:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="clinicNameField" GridPane.rowIndex="0" GridPane.columnIndex="1" prefWidth="400"/>
                            
                            <Label text="Address:" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                            <TextArea fx:id="clinicAddressArea" GridPane.rowIndex="1" GridPane.columnIndex="1" prefWidth="400" prefRowCount="3" wrapText="true"/>
                            
                            <Label text="Phone:" GridPane.rowIndex="2" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="clinicPhoneField" GridPane.rowIndex="2" GridPane.columnIndex="1" prefWidth="200"/>
                            
                            <Label text="Email:" GridPane.rowIndex="3" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="clinicEmailField" GridPane.rowIndex="3" GridPane.columnIndex="1" prefWidth="300"/>
                        </GridPane>
                    </VBox>
                </ScrollPane>
            </Tab>
            
            <!-- Tab 2: Reports -->
            <Tab text="Reports &amp; Branding">
                <ScrollPane fitToWidth="true">
                    <VBox spacing="20" style="-fx-padding: 30;">
                        <Label text="Report Customization" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
                        
                        <VBox spacing="5">
                             <Label text="Report Header Text:" style="-fx-font-weight: bold;"/>
                             <TextField fx:id="headerTextField" promptText="Top of the PDF report"/>
                        </VBox>

                        <VBox spacing="5">
                             <Label text="Report Footer / Disclaimer:" style="-fx-font-weight: bold;"/>
                             <TextArea fx:id="footerTextArea" promptText="Bottom of the PDF report" prefRowCount="3" wrapText="true"/>
                        </VBox>
                        
                        <Separator/>
                        
                        <Label text="Logo Configuration" style="-fx-font-size: 14; -fx-font-weight: bold;"/>
                        <HBox spacing="10" alignment="CENTER_LEFT">
                            <Label text="Logo Path/URL:"/>
                            <TextField fx:id="logoPathField" HBox.hgrow="ALWAYS" promptText="Path to image file"/>
                            <Button text="Browse..." onAction="#handleBrowseLogo"/>
                        </HBox>
                        <Label text="(Supports local file paths)" style="-fx-text-fill: grey; -fx-font-size: 10;"/>
                    </VBox>
                </ScrollPane>
            </Tab>
            
            <!-- Tab 3: Billing -->
            <Tab text="Billing &amp; Finance">
                <ScrollPane fitToWidth="true">
                    <VBox spacing="20" style="-fx-padding: 30;">
                        <Label text="Currency &amp; Tax" style="-fx-font-size: 16; -fx-font-weight: bold;"/>
                        
                        <GridPane hgap="15" vgap="15">
                            <Label text="Currency Symbol:" GridPane.rowIndex="0" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="currencySymbolField" GridPane.rowIndex="0" GridPane.columnIndex="1" prefWidth="100"/>
                            
                            <Label text="Default Tax Rate (%):" GridPane.rowIndex="1" GridPane.columnIndex="0" style="-fx-font-weight: bold;"/>
                            <TextField fx:id="taxRateField" GridPane.rowIndex="1" GridPane.columnIndex="1" prefWidth="100"/>
                        </GridPane>
                    </VBox>
                </ScrollPane>
            </Tab>
            
        </TabPane>
    </center>
    
    <bottom>
        <HBox alignment="CENTER_LEFT" style="-fx-padding: 10; -fx-background-color: #ecf0f1;">
            <Label fx:id="statusLabel" text="Ready" textFill="#7f8c8d"/>
        </HBox>
    </bottom>
    
</BorderPane>
